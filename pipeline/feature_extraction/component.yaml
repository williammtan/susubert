name: Feature Extraction Function
description: Uses pretrained LM to extract features from the name of a list of products

inputs:
- {name: LM, type: String, description: 'Huggingface language model'}
- {name: Products, type: GCSPath, description: 'CSV file to products'}
outputs:
- {name: SaveIndex, type: LocalPath, description: 'Path to annoy index'}

implementation:
  container:
    image: gcr.io/food-id-app/susubert/feature-extraction@sha256:111f0daefe08cb658f8f0941d07bddbaf73058db0884a58be7d75060b61bb619
    command: [
      python, feature_extraction.py,

      --lm, {inputValue: LM},

      --products, {inputPath: Products},

      --save-index, {outputPath: SaveIndex},
    ]